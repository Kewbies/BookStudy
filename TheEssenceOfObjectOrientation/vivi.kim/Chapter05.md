## Chapter 05. 책임과 메시지

> 책임의 자율성이 협력의 품질을 결정한다.



## 자율적인 책임

### 설계의 품질을 좌우하는 책임

- 객체는 책임을 '**자율적**'으로 수행할 수 있어야 한다. -> 객체란 **스스로 정한 원칙에 따라 판단하고 스스로의 의지를 기반으로 행동**해야 한다.
- 객체가 책임을 자율적으로 수행하기 위해서는 객체에게 **할당되는 책임이 자율적**이어야 한다.
  - 자율적인 책임 -> 자율적인 객체 -> 유연하고 단순한 협력
- 자율적인 책임이란 *어떻게(how)해야 하는가가 아니라 무엇을(what) 해야 하는가*를 설명한다.
- 객체가 자신에게 할당된 책임을 수행하도록 만드는 것은 외부에서 전달되는 요청(메시지)이다.





## 메시지와 메서드

### 메시지(Message)

- **메시지**란 객체의 행동을 유발할 수 있도록 보내는 요청을 말한다.
  - 이러한 요청을 보내는 것을 **메시지-전송**이라고 한다.
- 메시지의 구성 요소
  - *메시지 이름(message name)* - 메시지를 식별하기 위한 요소
  - *인자(argument)* - 메시지를 처리하는 데 필요한 추가 정보
- 메시지 전송은 수신자와 메시지의 조합이다.
  - **메시지 전송: 수신자 + 메시지 이름 + 인자**
- 메시지를 수신받은 객체는 **자신이 해당 메시지를 처리할 수 있는지 확인**한다.
  - 메시지를 처리할 수 있다는 것은 객체가 해당 메시지를 처리할 책임이 있다는 것을 의미한다.
  - 메시지를 처리하는 방법은 **캡슐화**되어있다.



### 메서드(Method)

- **메서드**란 객체가 수신할 수 있는 *'메시지'*와 **메시지를 처리하기 위해 내부적으로 선택하는 *'방법'*** 중 방법에 해당하는 것
- 메시지를 수신한 객체는 **실행 시간에 메서드를 선택할 수 있다.**



### 다형성(Polymorphism)

- **다형성**이란 서로 다른 유형의 객체가 동일한 메시지에 대해 서로 다르게 반응하는 것
- 메시지는 '무엇'이 실행될지는 명시하지만 '어떻게' 실행할지는 수신자가 결정할 수 있기 때문에 발생하는 객체지향의 특성
- **서로 다른 객체들이 다형성을 만족시킨다는 것**은 **객체들이 동일한 책임을 공유하는 것**을 의미한다.
  - 즉, 다형성은 동일한 역할을 수행할 수 있는 객체들 사이의 **대체 가능성**을 의미한다.



### 유연하고 확장 가능하고 재사용성이 높은 협력

- **송신자가 수신자에 대해 매우 적은 정보만 알고 있더라도 상호 협력이 가능하다는 사실**은 설계의 품질에 큰 영향을 미친다.

1. 협력이 유연해진다.
   - 송신자는 수신자가 메시지를 이해할 수 있다면 누구라도 상관하지 않는다.
2. 협력이 수행되는 방식을 확장할 수 있다.
   - 수신자를 교체할 수 있기 때문에 협력의 세부적인 수행 방식을 쉽게 수정할 수 있다.

3. 협력이 수행되는 방식을 재사용할 수 있다.
   - 객체는 각자의 책임을 자율적으로 수행하기 때문에 다양한 문맥에서 재사용할 수 있다.





## 객체 인터페이스

- **인터페이스**란 어떤 두 사물이 마주치는 경계 지점에서 서로 상호작용할 수 있게 이어주는 방법이나 장치를 의미한다.
  - 어떤 대상과 상호작용하고 싶다면 그 대상이 제공하는 인터페이스의 사용법을 익혀야 한다.
- 인터페이스의 특징
  - 인터페이스의 사용법을 익히기만 하면 **내부 구조를 몰라도 쉽게 대상을 조작**할 수 있다.
  - 인터페이스를 변경하지 않고 **내부 구조를 자유롭게 변경**할 수 있다.
  - 대상이 변경되더라도 **동일한 인터페이스를 제공한다면 문제없이 상호작용**할 수 있다.
- 객체지향에서는 **메시지가 인터페이스를 결정**한다.
  - 객체가 다른 객체와 상호작용할 수 있는 유일한 방법은 '메시지'이기 때문
  - **객체의 인터페이스**는 **객체가 수신할 수 있는 메시지의 목록**으로 구성된다.
- 인터페이스는 *외부에서 접근 가능한 인터페이스(public)*와 *내부에서만 접근 가능한 인터페이스(private)*로 구분된다.
  - 외부에 공개된 인터페이스: **공용 인터페이스(public interface)**
  - 객체가 가지는 상태 + 메서드: **구현(implement)**
    - 객체의 자율성을 보존하기 위해 구현을 외부로부터 감추는 것: **캡슐화(encapsulation)**
- 훌륭한 객체란 구현을 모른 채 인터페이스만 알면 쉽게 상호작용할 수 있는 객체를 의미한다.
  - 즉, 객체를 설계할 때는 외부에 노출되는 인터페이스와 객체의 내부에 숨겨지는 구현을 명확하게 분리해야 한다.
    - 인터페이스-구현 분리 원칙 (ISP)





## 책임의 자율성 = 협력의 품질

- 객체의 책임이 자율적일수록 협력이 이해하기 쉬워지고 유연하게 변경할 수 있게 된다.



1. **자율적인 책임은 협력을 단순하게 만든다.**
   - 책임이 적절하게 추상화됨으로써, 책임을 세부적인 사항들은 무시하고 의도를 드러내는 하나의 문장으로 표현할 수 있게 된다.
2. **자율적인 책임은 객체의 외부와 내부를 명확하게 분리한다.**
   - 수신자가 몰라도 되는 부분이 캡슐화되기 때문에 인터페이스와 구현이 분리된다.
3. **책임이 자율적일 경우 책임을 수핸하는 내부적인 방법을 변경하더라도 외부에 영향을 미치지 않는다.**
   - 변경에 의해 수정되어야 하는 범위가 좁아지고 명확해진다.
   - 객체 변경에 대한 side effect또한 캡슐화되어있기 때문에 두 객체 간의 결합도가 낮아진다.
4. **자율적인 책임은 협력의 대상을 다양하게 선택할 수 있는 유연성을 제공한다.**
   - 설계가 유연해지고 재사용성이 높아진다.
5. **객체가 수행하는 책임들이 자율적일수록 객체의 역할을 이해하기 쉬워진다.**
   - 객체의 응집도를 높은 상태로 유지하기가 쉬워진다.