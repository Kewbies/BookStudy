## Chapter 06. 객체 지도

> 소프트웨어는 구조를 기반으로 설계해야 범용적이고 이해하기 쉬우며 변경에 안정적이다.



## 객체 지도

- 지도는 실세계의 지형을 기반으로 만들어진 **추상화된 모델**이다.
- 길을 찾을 때 길을 직접 알려주는 방법은 '**기능 분해**'로 문제를 해결하는 방법이다.
  - 목적지가 달라질 때 마다 새롭게 길을 알려줘야 한다. (재사용 불가능)
- 지도를 이용하는 방법은 '**구조적이고 문제 지향적인 접근법**'으로 문제를 해결하는 방법이다.
  - 목적지가 달라져도 지도를 이용해 간단하게 길을 표현할 수 있다.
- 이를 소프트웨어 설계에 비춰봤을 때, 문제에 대한 요구사항과 기능은 계속 변하지만 구조는 거의 변하지 않기 때문에 **구조를 기반으로 모델을 구축하는 것이 변경에 안정적**이다.





## 기능 설계 vs. 구조 설계

### 소프트웨어 제품 설계의 두 가지 측면

- **기능 측면의 설계**: *제품이 사용자를 위해 무엇을 할 수 있는가*
- **구조 측면의 설계**: *제품의 형태가 어떠해야 하는가*

- 소프트웨어 요구사항과 기능은 항상 변경될 수 밖에 없다.
  - **기능**을 중심으로 설계하면 유지보수 비용이 많이 발생한다.
    - 설계의 일차적인 목표는 변경에 소요되는 비용을 낮추는 것이기 때문에 유지보수 비용이 많이 발생하는 것은 좋지 않다.
  - 자주 변경되는 기능이 아닌 안정적인 **구조**를 중심으로 설계하는 것이 필요하다.
    - 변경되는 요구사항과 기능에 유연하게 대처하기 위해서는 **변경을 수용할 수 있는 유연한 구조**가 필요하다.



### 기능과 구조

- **기능(function)**은 사용자의 목표를 만족시키기 위해 책임을 수행하는 시스템의 행위로 표현한다.

- **구조(structure)**는 사용자나 이해관계자들이 도메인(domain)에 관해 생각하는 개념과 개념들 간의 관계로 표현한다.

  

- #### **구조**

  - 도메인 모델: *안정적인 구조 개념화*
    - **도메인**: ***사용자가 프로그램을 사용하는 대상 분야***
    - **도메인 모델**: 도메인에 관한 지식을 선택적으로 단순화하고 의식적으로 구조화한 형태, ***이해관계자들이 바라보는 소프트웨어에 대한 모습***
    - 도메인 모델은 **현실의 대상을 소프트웨어 객체로 창조할 수 있도록 추상화한 것**으로, 현실 객체와 소프트웨어 객체 사이의 표현적 차이를 줄일 수 있다.
    - 소프트웨어는 도메인 모델을 기반으로 설계하고 구현한다 -> **사용자가 도메인을 바라보는 관점을 코드에 반영**할 수 있게 된다.

  

- #### **기능**

  - 유스케이스: *불한정한 기능 서술*
    - **유스케이스**: 사용자와 소프트웨어 간에 이뤄지는 상호작용의 흐름을 텍스트로 정리한 것
    - 유스케이스를 사용함으로써 *사용자가 소프트웨어를 통해 얻고자 하는 '목표'*를 중심으로 **소프트웨어의 기능적인 요구사항들을 이야기 형식으로 묶을 수 있다.**
    - 유스케이스는 사용자가 소프트웨어를 사용하는 **여러 시나리오들의 집합**이다.
      - 단순한 기능(feature) 목록과는 다르다.
    - 유스케이스는 내부 설계와 관련된 정보를 포함하지 않는다.



- #### **기능과 구조의 통합: 책임-주도 설계**

  - **도메인 모델**은 안정적인 구조를 개념화하기 위해, **유스케이스**는 불안정한 기능을 서술하기 위해 가장 일반적으로 사용되는 도구다.
  - **책임-주도 설계**는 유스케이스로부터 **첫 번째 메시지와 사용자가 달성하는 목표**를, 도메인 모델로부터 **기능을 수용할 수 있는 안정적인 구조**를 제공받는다.
  - 책임-주도 설계 방법은 **시스템의 기능**을 **역할**과 **책임을 수행하는 객체들의 협력 관계**로 바라보게 함으로써 도메인 모델과 유스케이스 모델을 통합한다.
    - 사용자의 관점에서 시스템의 기능을 명시하게 된다. - *유스케이스*
    - 사용자와 설계자가 공유하는 안정적인 구조를 기반으로 설계한다. - *도메인 모델*
  - **연결완전성**: 도메인 모델링에서 사용한 객체와 개념을 프로그래밍 설계에서의 객체와 클래스로 매끄럽게 변환할 수 있다.
  - **가역성(reversibility)**: 코드의 변경에 따라 도메인 모델의 변경 사항을 유추할 수 있다.

