## Chapter 04. 역할, 책임, 협력

> 어떤 협력에 참여하는지가 객체에 필요한 책임과 역할을 정의한다.



## 협력-책임-역할

### 협력

- **협력(Collaboration)**은 다수의 연쇄적인 요청과 응답의 흐름으로 구성된다.
  - **협력**은 요청으로부터 시작된다.
- **요청**을 받은 객체는 맡은 **책임**을 수행할 의무가 있으며, 요청에 적절하게 **응답**할 수 있는 능력이 있다.
  - 즉, 요청과 응답은 협력에 참여하는 객체가 수행할 책임을 정의한다.



### 책임

- 특정 요청에 대해 응답할 의무가 있는 경우 해당 객체는 **책임(Responsibility)**을 가진다.
- 책임은 두 가지로 분류할 수 있다.
  - **객체가 무엇을 알고 있는가 - knowing**
    - 개인적인 정보에 관해 아는 것
    - 관련된 객체에 관해 아는 것
    - 자신이 유도하거나 계산할 수 있는 것에 관해 아는 것
  - **객체가 무엇을 할 수 있는가 - doing**
    - 객체를 생성하거나 계산을 하는 등의 스스로 하는 것
    - 다른 객체의 행동을 시작시키는 것
    - 다른 객체의 활동을 제어하고 조절하는 것
- 책임은 객체의 **공용 인터페이스**를 구성한다.
  - 외부에 제공해줄 수 있는 정보 - knowing
  - 외부에 제공해줄 수 있는 서비스 - doing
- **메시지(Message)** - 한 객체가 다른 객체에게 책임을 수행하도록 보내는 요청, 다른 객체에 접근할 수 있는 유일한 방법



### 역할

- **역할(Role)**이란 객체가 수행할 수 있는 책임의 집합이다.
- 협력에 참여하는 객체는 하나의 **역할로 추상화**할 수 있다. -> 역할을 이용해 협력을 추상화했다.
  - 하나의 역할을 수행하는 객체들은 수신하는 메시지를 동일한 방식으로 이해할 수 있는 객체들로 한정된다.
  - 따라서, 역할은 다른 객체에 의해 **대체 가능함**을 의미한다.
- 역할은 객체지향 설계의 *단순성(simplicity)*, *유연성(flexibility)*, *재사용성(reusability)*을 뒷받침한다.
- 객체는 역할이 암시하는 책임보다 더 많은 책임을 질 수 있으므로, 객체의 타입과 역할 사이에는 **일반화/특수화 관계**가 성립한다.





## 객체의 모양을 결정하는 협력

### 객체지향에 관한 흔한 오류

- 객체는 데이터를 저장하기 위해 존재한다.
  - 객체가 상태의 일부로 데이터를 포함하긴 하지만 데이터는 단지 action에 필요한 재료일 뿐이다.
- 객체지향의 중점을 시스템의 정적인 측면인 클래스에 중점을 둔다.
  - 객체지향에서 중요한 것은 협력에 참여하는 동적인 객체다.
  - 객체지향의 핵심은 객체가 협력 안에서 어떤 책임과 역할을 수행할 것인지를 결정하는 것.



### 객체지향 설계 기법

- **책임-주도 설계 (Responsibility-Driven Design)**
  - **객체의 역할, 책임, 협력을 고안하기 위한 방법과 절차**
  - 시스템의 책임을 객체의 책임으로 변환한다.
  - 책임을 수행하는 중에 필요한 정보나 서비스를 제공해줄 **협력 객체를 찾아 해당 객체에게 책임을 할당**한다.
  - 개별적인 객체의 상태가 아니라 **객체의 책임과 상호작용에 집중**한다.
- **디자인 패턴 (Design Pattern)**
  - **책임-주도 설계의 결과**
  - 반복적으로 발생하는 문제와 그 문제를 해결하기 위해 모범이 되는 설계 방법 - pattern
  - Ex) COMPOSITE 패턴
- **테스트 주도 개발 (Test-Driven Development)**
  - **애자일 방법론의 한 종류로, 리팩토링을 통해 클린코드를 얻는 방법**
  - < 실패하는 테스트 작성 -> 테스트를 통과하는 가장 간단한 코드 작성 -> 리팩토링 > 의 기본 흐름을 가진다.
  - 객체가 이미 존재한다고 가정하고 객체에게 어떤 메시지를 전송할 것인지 고려하며 테스트를 작성해야 한다.

